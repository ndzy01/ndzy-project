import{j as N,k as $,a as j,_ as L,e as I,d as A,g as F}from"./vendor_@babel-_vabsixR.js";import{r as t}from"./vendor_react-xEkgX5Pu.js";import{l as K,d as T,S as C,t as V}from"./vendor_rc-util-xXFr7v_y.js";import{i as X}from"./vendor_resize-observer-polyfill-B32NGzNS.js";var b=t.createContext(null);function Y(e){var i=e.children,r=e.onBatchResize,o=t.useRef(0),n=t.useRef([]),a=t.useContext(b),l=t.useCallback(function(d,f,s){o.current+=1;var h=o.current;n.current.push({size:d,element:f,data:s}),Promise.resolve().then(function(){h===o.current&&(r==null||r(n.current),n.current=[])}),a==null||a(d,f,s)},[r,a]);return t.createElement(b.Provider,{value:l},i)}var c=new Map;function q(e){e.forEach(function(i){var r,o=i.target;(r=c.get(o))===null||r===void 0||r.forEach(function(n){return n(o)})})}var M=new X(q);function G(e,i){c.has(e)||(c.set(e,new Set),M.observe(e)),c.get(e).add(i)}function J(e,i){c.has(e)&&(c.get(e).delete(i),c.get(e).size||(M.unobserve(e),c.delete(e)))}var Q=function(e){N(r,e);var i=$(r);function r(){return j(this,r),i.apply(this,arguments)}return L(r,[{key:"render",value:function(){return this.props.children}}]),r}(t.Component);function U(e,i){var r=e.children,o=e.disabled,n=t.useRef(null),a=t.useRef(null),l=t.useContext(b),d=typeof r=="function",f=d?r(n):r,s=t.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!d&&t.isValidElement(f)&&K(f),O=h?f.ref:null,S=T(O,n),z=function(){var v;return C(n.current)||(n.current&&A(n.current)==="object"?C((v=n.current)===null||v===void 0?void 0:v.nativeElement):null)||C(a.current)};t.useImperativeHandle(i,function(){return z()});var E=t.useRef(e);E.current=e;var _=t.useCallback(function(u){var v=E.current,w=v.onResize,D=v.data,x=u.getBoundingClientRect(),p=x.width,m=x.height,R=u.offsetWidth,g=u.offsetHeight,y=Math.floor(p),k=Math.floor(m);if(s.current.width!==y||s.current.height!==k||s.current.offsetWidth!==R||s.current.offsetHeight!==g){var W={width:y,height:k,offsetWidth:R,offsetHeight:g};s.current=W;var P=R===Math.round(p)?p:R,B=g===Math.round(m)?m:g,H=I(I({},W),{},{offsetWidth:P,offsetHeight:B});l==null||l(H,u,D),w&&Promise.resolve().then(function(){w(H,u)})}},[]);return t.useEffect(function(){var u=z();return u&&!o&&G(u,_),function(){return J(u,_)}},[n.current,o]),t.createElement(Q,{ref:a},h?t.cloneElement(f,{ref:S}):f)}var Z=t.forwardRef(U),ee="rc-observer-key";function re(e,i){var r=e.children,o=typeof r=="function"?[r]:V(r);return o.map(function(n,a){var l=(n==null?void 0:n.key)||"".concat(ee,"-").concat(a);return t.createElement(Z,F({},e,{key:l,ref:a===0?i:void 0}),n)})}var te=t.forwardRef(re);te.Collection=Y;export{te as R};
